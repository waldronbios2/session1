---
title: "Session 1 lab: Multiple linear regression in R"
author: "Levi Waldron"
institute: "CUNY SPH Biostatistics 2"
output:
  slidy_presentation: default
  html_document:
    df_print: paged
    number_sections: yes
    theme: cerulean
    toc: yes
  beamer_presentation:
    colortheme: dove
    df_print: paged
    fonttheme: structurebold
    slide_level: 2
    theme: Hannover
  pdf_document:
    toc: yes
---

# Application: Cholesterol vs. Age association

Figure out this command using `File - Import Dataset`

```{r}
library(readr)
chol <- read_table2("cholesterol.tsv", 
    col_types = cols(age = col_double()))
summary(chol)
```

Example: Cholesterol vs. Age scatterplot
========================================================

Take Data Science Module 1 "Data Visualization Basics" first if you aren't familiar with `ggplot2`:
```{r, message=FALSE}
library(ggplot2)
ggplot(chol, aes(x=age, y=cholesterol, shape=state, color=state)) + 
  geom_point(size=4) +
  geom_smooth(method=lm, se = FALSE)
```


Example: Cholesterol vs. Age linear model
========================================================

\tiny
```{r}
fit <- lm(cholesterol ~ age * state, data=chol)
summary(fit)
```

Example: Cholesterol vs. Age ANOVA table
========================================================

```{r}
anova(fit)
```


Example: Cholesterol vs. Age diagnostic plots
========================================================

```{r}
par(mfrow=c(2, 2))
plot(fit)
```

Example: Cholesterol vs. Age partial F-test
========================================================

```{r}
fit1 <- lm(cholesterol ~ state, data=chol)
fit2 <- lm(cholesterol ~ state + age, data = chol)
anova(fit1, fit2)
```

Example: Cholesterol vs. Age backwards selection
========================================================

\small
```{r}
library(MASS)
fit <- lm(cholesterol ~ age * state, data=chol)
step <- stepAIC(fit, direction = "backward")
```
\small
AIC = Akaike's Information Criterion

